{% extends "app/base.html" %}
{% load static %}
{% load humanize %}

{% block banner_slider %}
  <div class="container mt-4">
    <div class="row">
        <!-- Sidebar - Danh m·ª•c s·∫£n ph·∫©m -->
        <div class="col-md-3">
          <div class="bg-white rounded-3 shadow-sm p-3 h-100">
              <div class="list-group mt-1">
                  <a href="#" class="list-group-item list-group-item-action d-flex align-items-center justify-content-center rounded-3 mb-2 bg-light py-2 px-3">
                      <img src="{% static 'app/images/ip.png' %}" alt="iPhone" class="me-1" width="38" height="38">
                      IPhone
                  </a>
                  <a href="#" class="list-group-item list-group-item-action d-flex align-items-center justify-content-center rounded-3 mb-2 bg-light py-2 px-3">
                      <img src="{% static 'app/images/samsung.png' %}" alt="Samsung" class="me-2" width="38" height="38">
                      Samsung
                  </a>
                  <a href="#" class="list-group-item list-group-item-action d-flex align-items-center justify-content-center rounded-3 mb-2 bg-light py-2 px-3">
                      <img src="{% static 'app/images/xiaomi.png' %}" alt="Xiaomi" class="me-2" width="38" height="38">
                      Xiaomi
                  </a>
                  <a href="#" class="list-group-item list-group-item-action d-flex align-items-center justify-content-center rounded-3 mb-2 bg-light py-2 px-3">
                      <img src="{% static 'app/images/nokia.png' %}" alt="Nokia" class="me-2" width="38" height="38">
                      Nokia
                  </a>
                  <a href="#" class="list-group-item list-group-item-action d-flex align-items-center justify-content-center rounded-3 mb-2 bg-light py-2 px-3">
                      <img src="{% static 'app/images/oppo.png' %}" alt="OPPO" class="me-2" width="38" height="38">
                      OPPO
                  </a>
                  <a href="#" class="list-group-item list-group-item-action d-flex align-items-center justify-content-center rounded-3 mb-2 bg-light py-2 px-3">
                      <img src="{% static 'app/images/vivo.png' %}" alt="Vivo" class="me-2" width="38" height="38">
                      Vivo
                  </a>
              </div>
          </div>
        </div>

        <!-- Carousel - Slider -->
        <div class="col-md-9">
          <div id="carouselExampleRide" class="carousel slide shadow rounded-3 h-100" data-bs-ride="carousel" data-bs-interval="2000">
              <div class="carousel-inner rounded-3">
                  <div class="carousel-item active">
                      <img src="{% static 'app/images/banner/slider0.jpg' %}" class="d-block w-100 h-100 rounded-3" alt="Banner 1" style="object-fit: cover;">
                  </div>
                  <div class="carousel-item">
                      <img src="{% static 'app/images/banner/slider1.jpg' %}" class="d-block w-100 h-100 rounded-3" alt="Banner 2" style="object-fit: cover;">
                  </div>
                  <div class="carousel-item">
                      <img src="{% static 'app/images/banner/slider2.jpg' %}" class="d-block w-100 h-100 rounded-3" alt="Banner 3" style="object-fit: cover;">
                  </div>
              </div>
              <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleRide" data-bs-slide="prev">
                  <span class="carousel-control-prev-icon bg-dark rounded-circle" aria-hidden="true"></span>
                  <span class="visually-hidden">Previous</span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleRide" data-bs-slide="next">
                  <span class="carousel-control-next-icon bg-dark rounded-circle" aria-hidden="true"></span>
                  <span class="visually-hidden">Next</span>
              </button>
          </div>
        </div>
    </div>
  </div>
{% endblock banner_slider %}

{% block main-content %}
<div class="container mt-4">
  <div class="p-3 rounded shadow-sm" style="background-color: #e3f2fd;">
    <div class="border rounded p-4" style="background-color: #ffffff;">   
      <!-- Label ti√™u ƒë·ªÅ n·ªïi b·∫≠t -->
      <div class="mb-3">
        <span class="badge px-4 py-2 fs-6 shadow-sm"
              style="background-color: #e3f2fd; color: #212121;">
          üî• S·∫¢N PH·∫®M B√ÅN CH·∫†Y NH·∫§T
        </span>
      </div>
      <div id="productSplide" class="splide">
        <div class="splide__track">
          <ul class="splide__list">
            {% for product in products %}
            <li class="splide__slide">
              <a href="{% url 'detail' %}?id={{ product.id }}" class="text-decoration-none">
                <div class="card h-100 shadow-sm border position-relative product-card rounded-3 hover-shadow">
                  <!-- Badge Tr·∫£ g√≥p 0% -->
                  <span class="badge fw-bold position-absolute top-0 start-0 m-2"
                        style="background-color: #5bc0de;">
                    TR·∫¢ G√ìP 0%
                  </span>
                  <!-- Product Image -->
                  <img src="{{ product.ImageURL }}"
                      class="card-img-top img-fluid"
                      alt="{{ product.name }}"
                      style="height: 200px; object-fit: contain; padding: 20px; margin-top: 40px;">
                  <!-- Product Content -->
                  <div class="card-body">
                    <h6 class="card-title text-truncate" title="{{ product.name }}">
                      {{ product.name }}
                    </h6>
                    <!-- Hi·ªÉn th·ªã gi√° b·∫±ng ti·∫øng Vi·ªát -->
                    <p class="card-text fw-bold text-danger mb-1">
                      {{ product.price|floatformat:0|intcomma }} VND
                    </p>
                    <small class="text-muted">Cam k·∫øt 0 l√£i, 0 ph√≠ ph√°t sinh</small>
                  </div>
                </div>
              </a>
            </li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container mt-4">
  <!-- iPhone Section with Outer Frame -->
  <div class="mt-4 p-3 rounded shadow-sm" style="background-color: #e3f2fd;">
    <div class="border rounded p-4" style="background-color: #ffffff;">
      <h2 class="fs-3 fw-bold mb-4">IPhone</h2>
      <div class="row">
        {% for product in iphone_products %}
          <div class="col flex-fill mb-4" style="flex: 0 0 20%; max-width: 20%;">
            <div class="card h-100 shadow-sm text-center">
              <a href="{% url 'detail' %}?id={{ product.id }}" style="text-decoration: none; color: inherit;">
                <img src="{{ product.ImageURL }}" class="card-img-top" alt="{{ product.name }}" style="height: 200px; object-fit: contain; padding: 20px;">
                <div class="card-body">
                  <h6 class="card-title">{{ product.name }}</h6>
                  {% if product.discount %}
                    <span class="badge bg-danger text-white mb-2">[-{{ product.discount }}%]</span>
                  {% endif %}
                  <p class="card-text text-danger fw-bold">{{ product.price|floatformat:0|intcomma }}‚Ç´</p>
                  {% if product.original_price %}
                    <p class="text-muted text-decoration-line-through">{{ product.original_price|floatformat:0|intcomma }}‚Ç´</p>
                  {% endif %}
                </div>
              </a>
            </div>
          </div>
        {% empty %}
          <div class="col-12">
            <p class="text-muted text-center">Kh√¥ng c√≥ s·∫£n ph·∫©m n√†o trong danh m·ª•c n√†y.</p>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>

  <!-- Samsung Section with Outer Frame -->
  <div class="mt-4 p-3 rounded shadow-sm" style="background-color: #e3f2fd;">
    <div class="border rounded p-4" style="background-color: #ffffff;">
      <h2 class="fs-3 fw-bold mb-4">Samsung</h2>
      <div class="row">
        {% for product in samsung_products %}
          <div class="col flex-fill mb-4" style="flex: 0 0 20%; max-width: 20%;">
            <div class="card h-100 shadow-sm text-center">
              <a href="{% url 'detail' %}?id={{ product.id }}" style="text-decoration: none; color: inherit;">
                <img src="{{ product.ImageURL }}" class="card-img-top" alt="{{ product.name }}" style="height: 200px; object-fit: contain; padding: 20px;">
                <div class="card-body">
                  <h6 class="card-title">{{ product.name }}</h6>
                  {% if product.discount %}
                    <span class="badge bg-danger text-white mb-2">[-{{ product.discount }}%]</span>
                  {% endif %}
                  <p class="card-text text-danger fw-bold">{{ product.price|floatformat:0|intcomma }}‚Ç´</p>
                  {% if product.original_price %}
                    <p class="text-muted text-decoration-line-through">{{ product.original_price|floatformat:0|intcomma }}‚Ç´</p>
                  {% endif %}
                </div>
              </a>
            </div>
          </div>
        {% empty %}
          <div class="col-12">
            <p class="text-muted text-center">Kh√¥ng c√≥ s·∫£n ph·∫©m n√†o trong danh m·ª•c n√†y.</p>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>

  <!-- OPPO Section with Outer Frame -->
  <div class="mt-4 p-3 rounded shadow-sm" style="background-color: #e3f2fd;">
    <div class="border rounded p-4" style="background-color: #ffffff;">
      <h2 class="fs-3 fw-bold mb-4">OPPO</h2>
      <div class="row">
        {% for product in oppo_products %}
          <div class="col flex-fill mb-4" style="flex: 0 0 20%; max-width: 20%;">
            <div class="card h-100 shadow-sm text-center">
              <a href="{% url 'detail' %}?id={{ product.id }}" style="text-decoration: none; color: inherit;">
                <img src="{{ product.ImageURL }}" class="card-img-top" alt="{{ product.name }}" style="height: 200px; object-fit: contain; padding: 20px;">
                <div class="card-body">
                  <h6 class="card-title">{{ product.name }}</h6>
                  {% if product.discount %}
                    <span class="badge bg-danger text-white mb-2">[-{{ product.discount }}%]</span>
                  {% endif %}
                  <p class="card-text text-danger fw-bold">{{ product.price|floatformat:0|intcomma }}‚Ç´</p>
                  {% if product.original_price %}
                    <p class="text-muted text-decoration-line-through">{{ product.original_price|floatformat:0|intcomma }}‚Ç´</p>
                  {% endif %}
                </div>
              </a>
            </div>
          </div>
        {% empty %}
          <div class="col-12">
            <p class="text-muted text-center">Kh√¥ng c√≥ s·∫£n ph·∫©m n√†o trong danh m·ª•c n√†y.</p>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>

  <!-- Xiaomi Section with Outer Frame -->
  <div class="mt-4 p-3 rounded shadow-sm" style="background-color: #e3f2fd;">
    <div class="border rounded p-4" style="background-color: #ffffff;">
      <h2 class="fs-3 fw-bold mb-4">Xiaomi</h2>
      <div class="row">
        {% for product in xiaomi_products %}
          <div class="col flex-fill mb-4" style="flex: 0 0 20%; max-width: 20%;">
            <div class="card h-100 shadow-sm text-center">
              <a href="{% url 'detail' %}?id={{ product.id }}" style="text-decoration: none; color: inherit;">
                <img src="{{ product.ImageURL }}" class="card-img-top" alt="{{ product.name }}" style="height: 200px; object-fit: contain; padding: 20px;">
                <div class="card-body">
                  <h6 class="card-title">{{ product.name }}</h6>
                  {% if product.discount %}
                    <span class="badge bg-danger text-white mb-2">[-{{ product.discount }}%]</span>
                  {% endif %}
                  <p class="card-text text-danger fw-bold">{{ product.price|floatformat:0|intcomma }}‚Ç´</p>
                  {% if product.original_price %}
                    <p class="text-muted text-decoration-line-through">{{ product.original_price|floatformat:0|intcomma }}‚Ç´</p>
                  {% endif %}
                </div>
              </a>
            </div>
          </div>
        {% empty %}
          <div class="col-12">
            <p class="text-muted text-center">Kh√¥ng c√≥ s·∫£n ph·∫©m n√†o trong danh m·ª•c n√†y.</p>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>

  <!-- Vivo Section with Outer Frame -->
  <div class="mt-4 p-3 rounded shadow-sm" style="background-color: #e3f2fd;">
    <div class="border rounded p-4" style="background-color: #ffffff;">
      <h2 class="fs-3 fw-bold mb-4">Vivo</h2>
      <div class="row">
        {% for product in vivo_products %}
          <div class="col flex-fill mb-4" style="flex: 0 0 20%; max-width: 20%;">
            <div class="card h-100 shadow-sm text-center">
              <a href="{% url 'detail' %}?id={{ product.id }}" style="text-decoration: none; color: inherit;">
                <img src="{{ product.ImageURL }}" class="card-img-top" alt="{{ product.name }}" style="height: 200px; object-fit: contain; padding: 20px;">
                <div class="card-body">
                  <h6 class="card-title">{{ product.name }}</h6>
                  {% if product.discount %}
                    <span class="badge bg-danger text-white mb-2">[-{{ product.discount }}%]</span>
                  {% endif %}
                  <p class="card-text text-danger fw-bold">{{ product.price|floatformat:0|intcomma }}‚Ç´</p>
                  {% if product.original_price %}
                    <p class="text-muted text-decoration-line-through">{{ product.original_price|floatformat:0|intcomma }}‚Ç´</p>
                  {% endif %}
                </div>
              </a>
            </div>
          </div>
        {% empty %}
          <div class="col-12">
            <p class="text-muted text-center">Kh√¥ng c√≥ s·∫£n ph·∫©m n√†o trong danh m·ª•c n√†y.</p>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>
<br><br><br>
{% endblock main-content %}